<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link href="css/index.css" rel="stylesheet" />
    <script>
        document.addEventListener("DOMContentLoaded", getNotifyOne);
        function getQS(key) {
            var qs = "", kva = [], kvi = [];
            qs = location.search.substring(1);
            kva = qs.split("&");
            for (i = 0; i < kva.length; i++) {
                kvi = kva[i].split("=");
                if (kvi[0] == key)
                    return kvi[1];
            }
            return (null);
        }
  function getNotifyOne()
    {
     // alert(getQS("id"));

      var selectedID = getQS("id");
      var oreq = new XMLHttpRequest();
      oreq.onreadystatechange = function () {
          if (oreq.readyState == 4) {
              var table = JSON.parse(oreq.responseText);
            txName.value=table[0].name;
            txAddress.value=table[0].address;
            txCity.value = table[0].city;
            txState.value = table[0].State;
            txZip.value = table[0].zip;
            txContact.value = table[0].contact;
          }
       }
      oreq.open("GET", "http://pomatino.com/book.svc/book/"+selectedID, true);
      //oreq.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                  oreq.send();
                      }
  function doUpdate()
  {
    //alert("In Do Update");
      var postdata = "name=" + encodeURIComponent(txName.value) + "&"
            + "address=" + encodeURIComponent(txAddress.value) + "&"
            + "city=" + encodeURIComponent(txCity.value) + " &"
            + "state=" + encodeURIComponent(txState.value) + "&"
            + "zip=" + encodeURIComponent(txZip.value) + "&"
            + "contact=" + encodeURIComponent(txContact.value) + "&" + "&";
    var selectedID = getQS("id");
    var oreq = new XMLHttpRequest();
    oreq.onreadystatechange = function ()
    {
    if (oreq.readyState == 4)
    {
    //alert("pass");
    var table = JSON.parse(oreq.responseText);
    //alert("Update Successful");
    location.href = "updatebook.html";
    }
    }
    oreq.open("POST", "http://pomatino.com/book.svc/book/"+selectedID, true);
    oreq.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    oreq.send(postdata);
    }

    </script>

</head>
<body>
    <div class="head-guest">
        <div class="ins-col1"><a href="electrician.html"><img src="images/back.png" /></a></div>
        <div class="ins-col2"><span align="middle">Your Profile</span></div><br /><br />
    </div>
    <div class="label">
        <div style="background-color:rgb(180, 83, 183);display:block;height:45px;margin-top:-9%;border-radius:3%;">
            <h2 style="color:white; padding:4% 6%">Enter Your Details</h2>
        </div>
        <div class="label-color">
            <label for="txName">Name:</label><br /><input class="input-style" type="text" id="txName" />
            <label for="txAddress">Address:</label><br /><textarea style="margin-bottom:5%" class="input-style1" rows="5" cols="16" type="text" id="txAddress"></textarea>
            <label for="txCity">City:</label><br /><input class="input-style" type="text" id="txCity" />
            <div style="width:100%">
                <div style="width:50%;float:left">
                    <label for="txState">State:</label><br />
                    <select class="input-style1" id="txState">
                        <option value="State">State</option>
                        <option value="AL">AL</option>
                        <option value="AK">AK</option>
                        <option value="AZ">AZ</option>
                        <option value="AR">AR</option>
                        <option value="CA">CA</option>
                        <option value="CO">CO</option>
                        <option value="CT">CT</option>
                        <option value="DE">DE</option>
                        <option value="FL">FL</option>
                        <option value="GA">GA</option>
                        <option value="HI">HI</option>
                        <option value="ID">ID</option>
                        <option value="KS">KS</option>
                        <option value="LA">LA</option>
                        <option value="MI">MI</option>
                        <option value="MN">MN</option>
                        <option value="MS">MS</option>
                        <option value="NM">NM</option>
                        <option value="NY">NY</option>
                        <option value="NJ">NJ</option>
                        <option value="OK">OK</option>
                        <option value="WY">WY</option>

                    </select>
                </div>
                <div style="width:46%;float:left;margin-left:4%">
                    <label for="txZip">Zip:</label><br /><input class="input-style3" type="text" id="txZip" />
                </div>
            </div>
            <label for="txContact">Contact:</label><br /><input class="input-style" type="text" id="txContact" />
            <input class="btn-color" type="button" value="Update" onclick="doUpdate()" /><br />
            <a style="padding-left:10%" href="index.html">Go to Home Page</a>
        </div>
    </div>
    
    <div class="footer">
        <ul class="navbar">
            <li style="width:20%;margin-left:-6%"><a class="anchor" href="household.html"><img style="width:30px;" src="images/houseicon.png" /><br /><span style="margin-left:-20%" class="color">Household</span></a></li>
            <li style="width:30%;margin-left:4%"><a class="anchor" href="healthcare.html"><img style="width:30px;padding-left:18%;" src="images/healthicon.png" /><br /><span style="margin-left:10%" class="color">Health</span></a></li>
            <li style="width:20%"><a href="insertnotify.html"><img style="width:30px;padding-left:10%" src="images/travelicon.png" /><br /><span class="color">Travel</span></a></li>
            <li style="width:20%"><a href="login.html"><img style="width:30px;padding-left:20%" src="images/loginicon.png" /><br /><span class="color">Login</span></a></li>
        </ul>
    </div>
</body>
</html>